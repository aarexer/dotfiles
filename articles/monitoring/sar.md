### Мониторинга с помощью sar
Если мы хотим, чтобы наша система мониторинга потребляла как можно меньше ресурсов, то отличный вариант - Sar.

Каждый флаг у sar что-то делает, например, `-u` - отвечате за профилировки процессора.
Надо отметить, что sar по сути при запуске делает слепок состояния, но не мониторит в реальном времени.

Для того, чтобы был именно мониторинг мы должны поставить запуск в cron или в фон, а писать все в лог.

Для снятия профилировки у себя я сделал что-то типа:
```sh
#!/usr/bin/sh

#cpu
sar -u 10 > cpu.log &

#ram
sar -r 10 > ram.log &

#net
sar -n TCP 10 > net.log &

#io
sar -b 10 > io.log &

```

Каждые десять секунд sar делает слепок по памяти, процессору, диску и сети(все, что TCP соединения).
Подробнее о каждом файле:
* cpu.log
`07:34:56 AM     CPU     %user     %nice   %system   %iowait    %steal     %idle`
Здесь:
* %idle — процент времени, когда процессору нечего было делать.
* %user — процент времени работы процессорав в режиме пользователя
* %iowait — процент времени, когда процессор проистаивал в ожидании завершения ввода/ввывода

* ram.log
`07:34:56 AM kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty`
Тут интересно только memused и kbmemfree.

* io.log
`07:34:56 AM       tps      rtps      wtps   bread/s   bwrtn/s`
Здесь:
* tps - транзакции в секунду (включает и запись и чтение)
* rtps – транзакций на чтение в секунду
* wtps – транзакций на запись в секунду
* bread/s – прочитано байт в секунду
* bwrtn/s – байт записано в секунду


Это все, что мне было необходимо при мониторинге, но можно гораздо более гибко мониторинг устроить.
